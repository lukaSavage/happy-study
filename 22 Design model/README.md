#  ç¬¬1ç« ï¼šè½¯ä»¶ç”Ÿå‘½å‘¨æœŸä¸æ¨¡å‹

## ä¸€ã€è½¯ä»¶ç”Ÿå‘½å‘¨æœŸ

### 1.1 å¯è¡Œæ€§åˆ†ææŠ¥å‘Šå’Œè½¯ä»¶å¼€å‘è®¡åˆ’

- äº§å‡ºå¯è¡Œæ€§åˆ†ææŠ¥å‘Š

### 1.2 éœ€æ±‚åˆ†æé˜¶æ®µ

- ç”±è½¯ä»¶åˆ†æå¸ˆæ¥åšï¼Œéœ€è¦æ‡‚æŠ€æœ¯ä¹Ÿéœ€è¦æ‡‚ä¸šåŠ¡
- åˆ†æå‡ºè½¯ä»¶éœ€è¦å®Œæˆä»€ä¹ˆåŠŸèƒ½
- äº§å‡ºéœ€æ±‚åˆ†æè¯´æ˜ä¹¦å’Œåˆæ­¥çš„ç”¨æˆ·æ‰‹å†Œ

### 1.3 è½¯ä»¶è®¾è®¡(æ¦‚è¦è®¾è®¡å’Œè¯¦ç»†è®¾è®¡)

- ç”±æ¶æ„å¸ˆ/é¡¹ç›®ç»ç†æ¥åš
- æ ¹æ®å›¢é˜ŸæŠ€æœ¯åŸºç¡€ç¡®å®šç”¨ä»€ä¹ˆæŠ€æœ¯æ ˆ(Java/Node/Php)
- ç¡®å®šéƒ¨ç½²çš„æ“ä½œç³»ç»Ÿ
- ä½¿ç”¨ä»€ä¹ˆæ•°æ®åº“(oracle/mysql/sqlserver)
- è®¾è®¡æ•°æ®åº“è¡¨
- é€‰æ‹©å›¢é˜Ÿæˆå‘˜
- äº§å‡ºè½¯ä»¶è®¾è®¡æ–‡æ¡£

### 1.4 ç¼–ç å·¥ä½œ

- å¼€å‘äººå‘˜æ¥åš
- æŠŠè®¾è®¡ç¼–æˆä»£ç 
- äº§å‡ºæºä»£ç ä»¥åŠæ¸…å•

### 1.5 æµ‹è¯•é˜¶æ®µ

- ç”±æµ‹è¯•å·¥ç¨‹å¸ˆè¿›è¡Œ
- åˆ†ä¸ºç™½ç›’æµ‹è¯•(å•å…ƒæµ‹è¯•)å’Œé»‘ç›’æµ‹è¯•(åŠŸèƒ½æµ‹è¯•)
- äº§å‡ºè½¯ä»¶æµ‹è¯•æŠ¥å‘Š

### 1.6 å®æ–½å’Œç»´æŠ¤å·¥ä½œ

- ç”±å®æ–½å·¥ç¨‹å¸ˆæ‰§è¡Œ
- æŠŠé¡¹ç›®æŒ‰ç…§éœ€è¦å®‰è£…å’Œé…ç½®å¥½ï¼Œè®©å®¢æˆ·ä½¿ç”¨å¹¶è§£å†³ç®€å•é—®é¢˜
- äº§å‡ºè½¯ä»¶ç»´æŠ¤æŠ¥å‘Š

## äºŒã€è½¯ä»¶å¼€å‘æ¨¡å‹ 

### 2.1ç€‘å¸ƒæ¨¡å‹

- ç€‘å¸ƒæ¨¡å‹ï¼ˆWaterfall Modelï¼‰ æ˜¯ä¸€ä¸ªé¡¹ç›®å¼€å‘æ¶æ„
- å¼€å‘è¿‡ç¨‹æ˜¯é€šè¿‡è®¾è®¡ä¸€ç³»åˆ—é˜¶æ®µé¡ºåºå±•å¼€çš„ï¼Œä»ç³»ç»Ÿéœ€æ±‚åˆ†æå¼€å§‹ç›´åˆ°äº§å“å‘å¸ƒå’Œç»´æŠ¤ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½ä¼šäº§ç”Ÿå¾ªç¯åé¦ˆ
- å¦‚æœæœ‰ä¿¡æ¯æœªè¢«è¦†ç›–æˆ–è€…å‘ç°äº†é—®é¢˜ï¼Œé‚£ä¹ˆæœ€å¥½ â€œè¿”å›â€ä¸Šä¸€ä¸ªé˜¶æ®µå¹¶è¿›è¡Œé€‚å½“çš„ä¿®æ”¹ï¼Œé¡¹ç›®å¼€å‘è¿›ç¨‹ä»ä¸€ä¸ªé˜¶æ®µâ€œæµåŠ¨â€åˆ°ä¸‹ä¸€ä¸ªé˜¶æ®µï¼Œè¿™ä¹Ÿæ˜¯ç€‘å¸ƒæ¨¡å‹åç§°çš„ç”±æ¥ã€‚

![ç€‘å¸ƒæ¨¡å‹](img/01.jpg)

### 2.2 å¢é‡å¼€å‘æ¨¡å‹

- å¢é‡æ¨¡å‹æ˜¯æŠŠå¾…å¼€å‘çš„è½¯ä»¶ç³»ç»Ÿæ¨¡å—åŒ–ï¼Œå°†æ¯ä¸ªæ¨¡å—ä½œä¸ºä¸€ä¸ªå¢é‡ç»„ä»¶ï¼Œä»è€Œåˆ†æ‰¹æ¬¡åœ°åˆ†æã€è®¾è®¡ã€ç¼–ç å’Œæµ‹è¯•è¿™äº›å¢é‡ç»„ä»¶ã€‚

  ![å¢é‡å¼€å‘æ¨¡å‹](img/02.jpg)

### 2.3 åŸå‹å¼€å‘æ¨¡å‹

åŸå‹æ¨¡å‹æŒ‡çš„æ˜¯åœ¨æ‰§è¡Œå®é™…è½¯ä»¶çš„å¼€å‘ä¹‹å‰ï¼Œåº”å½“å»ºç«‹ç³»ç»Ÿçš„ä¸€ä¸ªå·¥ä½œåŸå‹ã€‚

![åŸå‹å¼€å‘](img/03.jpg)

## ä¸‰ã€æ¨¡å‹

### 3.1 æ¨¡å‹ä¸UMLçš„ä»‹ç»

> å»ºé€ ä¸€æ ‹å¤§æ¥¼å‰éœ€è¦å…ˆæŠŠå›¾çº¸å°†å¤–è§‚ã€å†…éƒ¨ç»“æ„æè¿°æ¸…æ¥šï¼Œè¿™äº›å›¾çº¸å°±æ˜¯æ¨¡å‹ã€‚
>
> `Unified Modeling Language (UML)`åˆç§°ç»Ÿä¸€å»ºæ¨¡è¯­è¨€æˆ–æ ‡å‡†å»ºæ¨¡è¯­è¨€

### 3.2 æ¨¡å‹çš„ç‰¹ç‚¹

- ç®€åŒ–
- å¤šè§†è§’
- é€šç”¨ç¬¦å·

### 3.3 UMLç»„æˆ

![UMLç»„æˆ](img/04.jpg)

### 3.4 UMLå¼€å‘è½¯ä»¶

[staruml](http://staruml.io/)

## å››ã€è§†å›¾

### 4.1 ç”¨ä¾‹è§†å›¾

> ä»<font color="#f00">3.3èŠ‚UML</font>å¯çŸ¥ï¼Œç”¨ä¾‹è§†å›¾å³ç”±<font color="#08e">`ç”¨ä¾‹å›¾`</font>ç»„æˆ

#### 4.1.1 ç”¨ä¾‹å›¾

- ç”¨ä¾‹å»ºæ¨¡æœ€ä¸»è¦çš„åŠŸèƒ½æ˜¯è¡¨è¾¾ç³»ç»Ÿçš„åŠŸèƒ½æ€§éœ€æ±‚æˆ–è¡Œä¸º

- å‚äº’è€…ï¼š å‚ä¸è€…æŒ‡çš„æ˜¯ä¸ç³»ç»Ÿäº¤äº’çš„è§’è‰²ï¼Œå¯ä»¥æ˜¯äººï¼Œä¹Ÿå¯ä»¥æ˜¯äº‹ç‰©æˆ–å…¶å®ƒç³»ç»Ÿ

- ç”¨ä¾‹æ˜¯ç³»ç»Ÿä¸ºå‚ä¸è€…æä¾›çš„åŠŸèƒ½ã€‚ç”¨ä¾‹åç§°ä¸€èˆ¬æ˜¯ä¸€ä¸ªå¸¦æœ‰åŠ¨ä½œæ€§çš„è¯è¯­

- å¦‚ä¸‹å›¾ä¾‹â†“â†“â†“

  ![ç”¨ä¾‹å›¾](img/05.jpg)

ç”¨ä¾‹æè¿°

| é¡¹ç›®       | å†…å®¹                                                         |
| :--------- | :----------------------------------------------------------- |
| ç”¨ä¾‹åç§°   | ç™»å½•                                                         |
| ç”¨ä¾‹ID     | login                                                        |
| è§’è‰²       | ç”¨æˆ·                                                         |
| ç”¨ä¾‹è¯´æ˜   | æè¿°ç”¨æˆ·çš„ç™»å½•è¿‡ç¨‹                                           |
| å‰ç½®æ¡ä»¶   | æ‰“å¼€ç½‘ç«™é¡µé¢                                                 |
| åŸºæœ¬äº‹ä»¶æµ | 1.ç‚¹å‡»ç™»å½• 2. è¾“å…¥ç”¨æˆ·åå’Œç§˜å¯† 3. ç‚¹å‡»ç™»å½• 4. æœåŠ¡å™¨ä¼šä½¿ç”¨ä¼šè¯ä¿å­˜ç”¨æˆ·ç™»å½•çŠ¶æ€ |
| å…¶å®ƒäº‹ä»¶æµ | 1. ç”¨æˆ·åä¸ºç©ºæç¤ºç”¨æˆ·åä¸èƒ½ä¸ºç©º 2ã€‚å¯†ç ä¸ºç©ºæç¤ºå¯†ç ä¸èƒ½ä¸ºç©º  |
| å¼‚å¸¸äº‹ä»¶æµ | ç™»å½•è¶…æ—¶åˆ™è¿”å›ç™»å½•é¡µ                                         |
| åç½®æ¡ä»¶   | ç™»å½•æˆåŠŸï¼Œè¿›å…¥ä¸ªäººä¸­å¿ƒ                                       |

### 4.2 é€»è¾‘è§†å›¾

é€»è¾‘è§†å›¾åŒ…æ‹¬<font color="#08e">`ç±»å›¾`</font>å’Œ<font color="#08e">`å¯¹è±¡å›¾`</font>ç»„æˆ

#### 4.2.1 ç±»å›¾

- ç±»å›¾ï¼ˆClass Diagramï¼‰æè¿°ç±»çš„é™æ€ç»“æ„ï¼Œå®šä¹‰ç±»åŠæè¿°ç±»ä¹‹é—´çš„è”ç³»ï¼Œå¦‚å…³è”ã€ä¾èµ–ã€èšåˆç­‰ï¼Œè¿˜åŒ…æ‹¬ç±»çš„å†…éƒ¨ç»“æ„(ç±»çš„å±æ€§å’Œæ“ä½œ)

- ç±»å›¾æ˜¯ä¸€ç§é™æ€æ¨¡å‹ç±»å‹,ä¸€ä¸ªç±»å›¾æ ¹æ®ç³»ç»Ÿä¸­çš„ç±»ä»¥åŠå„ä¸ªç±»ä¹‹é—´çš„å…³ç³»æè¿°ç³»ç»Ÿçš„é™æ€ç»“æ„

- ç±»å›¾åŒ…å«7ä¸ªå…ƒç´ ï¼š

  - ç±»(Class)
  - æ¥å£(Interface)
  - åä½œ(Collaboration)
  - ä¾èµ–å…³ç³»(Dependency)
  - æ³›åŒ–å…³ç³»(Generalization)
  - å…³è”å…³ç³»(Association)
  - å®ç°å…³ç³»(Realization)

- åœ¨UMLä¸­,ç±»ç”¨çŸ©å½¢æ¥è¡¨ç¤º,åˆ†ä¸º3ä¸ªéƒ¨åˆ†: åç§°éƒ¨åˆ†(Name)ã€å±æ€§éƒ¨åˆ†(Attribute)å’Œæ“ä½œéƒ¨åˆ†(Operation)

- ç±»çš„è¡¨ç¤ºæ–¹å¼

  | ç±»å‹     | ç¤ºä¾‹                                           |
  | :------- | :--------------------------------------------- |
  | å±æ€§æ ¼å¼ | name : attribute type = default value          |
  | æ“ä½œæ ¼å¼ | name (parameter list) : type of value returned |

- ç±»å›¾çš„å‡ ç§å…³ç³»

  > å…³ç³»å¯ä»¥ä»å¼ºåˆ°å¼±ä¸º `ä¾èµ–< å…³è” <èšåˆ <ç»„åˆ`ã€‚
  >
  > ä¾èµ–æ˜¯æ–¹æ³•çš„å‚æ•°ï¼Œå…³è”æ˜¯å±æ€§ã€‚

  ä»¥ä¸‹æ˜¯ç±»å›¾å…³ç³»å›¾ä¾‹â†“â†“

  ![ç±»å›¾å…³ç³»ç¤ºæ„å›¾](img/06.jpg)

  - <font color="#f00">`ä¾èµ–(Dependency)å…³ç³»`</font>æ˜¯ç±»ä¸ç±»ä¹‹é—´çš„è”æ¥ã€‚ä¾èµ–å…³ç³»è¡¨ç¤ºä¸€ä¸ªç±»ä¾èµ–äºå¦ä¸€ä¸ªç±»çš„å®šä¹‰ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œä¾èµ–å…³ç³»åœ¨Javaè¯­è¨€ä¸­ä½“ç°ä¸ºå±€éƒ¨å˜é‡ã€æ–¹æ³•çš„å½¢å‚ï¼Œæˆ–è€…å¯¹é™æ€æ–¹æ³•çš„è°ƒç”¨ã€‚(ä»ä½¿ç”¨ä»¥åŠç”Ÿæ•ˆèŒƒå›´æ¥çœ‹ï¼Œå¹¶ä¸æ˜¯å•çº¯çš„å®šä¹‰ï¼Œå°±ç®—æ˜¯å®šä¹‰ä¸ºå®ä¾‹å˜é‡ï¼Œä½†æ˜¯ä½¿ç”¨ä¸Šåªåœ¨ä¸€ä¸ªæ–¹æ³•èŒƒå›´å†…ä½¿ç”¨ï¼Œä¸åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¾èµ–)

    >åªè¦åœ¨ç±»ä¸­ç”¨åˆ°äº†å¯¹æ–¹ï¼Œé‚£ä¹ˆå®ƒä»¬ä¹‹é—´å°±å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå¦‚æœæ²¡æœ‰å¯¹æ–¹ï¼Œè¿ç¼–è¯‘éƒ½é€šè¿‡ä¸äº†
    >
    >![ä¾èµ–å…³ç³»](img/07.jpg)

  - <font color="#f00">`å…³è”(Associationå…³ç³»`</font>æ˜¯ç±»ä¸ç±»ä¹‹é—´çš„è”æ¥ï¼Œå®ƒä½¿ä¸€ä¸ªç±»çŸ¥é“å¦ä¸€ä¸ªç±»çš„å±æ€§å’Œæ–¹æ³•(å®ä¾‹å˜é‡ä½“ç°)ã€‚å…³è”å¯ä»¥æ˜¯åŒå‘çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å•å‘çš„ã€‚ä¸¤ä¸ªç±»ä¹‹å‰æ˜¯ä¸€ä¸ªå±‚æ¬¡çš„ï¼Œä¸å­˜åœ¨éƒ¨åˆ†è·Ÿæ•´ä½“ä¹‹é—´çš„å…³ç³»ã€‚

    >- å…³è”å…³ç³»å®é™…ä¸Šå°±æ˜¯ç±»ä¸ç±»ä¹‹é—´çš„è”ç³»ï¼Œä»–æ˜¯ä¾èµ–å…³ç³»çš„ç‰¹ä¾‹ã€‚
    >- å…³è”å…³ç³»æ¯”ä¾èµ–çš„å…³ç³»æ›´å¼º
    >- å…³è”å…·æœ‰å¯¼èˆªæ€§ï¼Œå³åŒå‘å…³ç³»æˆ–å•å‘å…³ç³»ï¼Œè¡¨ç¤ºå…³ç³»åœ¨é‚£ä¸€æ–¹ç»´æŠ¤
    >- å…³è”å…·æœ‰å¤šé‡æ€§ï¼Œå¦‚
    >  - `1` è¡¨ç¤ºæœ‰ä¸”ä»…æœ‰ä¸€ä¸ª
    >  - `0...` è¡¨ç¤º0æˆ–è€…å¤šä¸ª
    >  - `0,1` è¡¨ç¤º0ä¸ªæˆ–è€…ä¸€ä¸ª
    >  - `n..m` è¡¨ç¤ºnåˆ°mä¸ªéƒ½å¯ä»¥
    >  - `m...` è¡¨ç¤ºè‡³å°‘mä¸ª
    >
    >![å…³è”å…³ç³»](img/08.jpg)

  - <font color="#f00">`èšåˆ(Aggregation) å…³ç³»`</font> æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œæ˜¯å¼ºçš„å…³è”å…³ç³»ã€‚èšåˆæ˜¯æ•´ä½“å’Œä¸ªä½“ä¹‹é—´çš„å…³ç³»ã€‚ä¾‹å¦‚ï¼Œæ±½è½¦ç±»ä¸å¼•æ“ç±»ã€è½®èƒç±»ï¼Œä»¥åŠå…¶å®ƒçš„é›¶ä»¶ç±»ä¹‹é—´çš„å…³ç³»ä¾¿æ•´ä½“å’Œä¸ªä½“çš„å…³ç³»ã€‚ä¸å…³è”å…³ç³»ä¸€æ ·ï¼Œèšåˆå…³ç³»ä¹Ÿæ˜¯é€šè¿‡å®ä¾‹å˜é‡å®ç°çš„ã€‚ä½†æ˜¯å…³è”å…³ç³»æ‰€æ¶‰åŠçš„ä¸¤ä¸ªç±»æ˜¯å¤„åœ¨åŒä¸€å±‚æ¬¡ä¸Šçš„ï¼Œè€Œåœ¨èšåˆå…³ç³»ä¸­ï¼Œä¸¤ä¸ªç±»æ˜¯å¤„åœ¨ä¸å¹³ç­‰å±‚æ¬¡ä¸Šçš„ï¼Œä¸€ä¸ªä»£è¡¨æ•´ä½“ï¼Œå¦ä¸€ä¸ªä»£è¡¨éƒ¨åˆ†ã€‚

    >- èšåˆå…³ç³»è¡¨ç¤ºçš„æ˜¯æ•´ä½“å’Œéƒ¨åˆ†çš„å…³ç³»ï¼Œæ•´ä½“ä¸éƒ¨åˆ†å¯ä»¥åˆ†å¼€
    >- èšåˆå…³ç³»æ˜¯å…³è”å…³ç³»çš„ç‰¹ä¾‹ï¼Œæ‰€æœ‰å®ƒå…·æœ‰å…³è”çš„å¯¼å‘æ€§å’Œå¤šé‡æ€§
    >- èšåˆçš„åŒæ–¹ç”Ÿå‘½å‘¨æœŸæ˜¯ç‹¬ç«‹çš„
    >
    >![èšåˆå…³ç³»](img/09.jpg)

  - <font color="#f00">`ç»„åˆ(Composition)å…³ç³»`</font>æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œæ˜¯æ¯”èšåˆå…³ç³»å¼ºçš„å…³ç³»ã€‚å®ƒè¦æ±‚æ™®é€šçš„èšåˆå…³ç³»ä¸­ä»£è¡¨æ•´ä½“çš„å¯¹è±¡è´Ÿè´£ä»£è¡¨éƒ¨åˆ†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç»„åˆå…³ç³»æ˜¯ä¸èƒ½å…±äº«çš„ã€‚ä»£è¡¨æ•´ä½“çš„å¯¹è±¡éœ€è¦è´Ÿè´£ä¿æŒéƒ¨åˆ†å¯¹è±¡å’Œå­˜æ´»ï¼Œåœ¨ä¸€äº›æƒ…å†µä¸‹å°†è´Ÿè´£ä»£è¡¨éƒ¨åˆ†çš„å¯¹è±¡æ¹®ç­æ‰ã€‚ä»£è¡¨æ•´ä½“çš„å¯¹è±¡å¯ä»¥å°†ä»£è¡¨éƒ¨åˆ†çš„å¯¹è±¡ä¼ é€’ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼Œç”±åè€…è´Ÿè´£æ­¤å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚æ¢è¨€ä¹‹ï¼Œä»£è¡¨éƒ¨åˆ†çš„å¯¹è±¡åœ¨æ¯ä¸€ä¸ªæ—¶åˆ»åªèƒ½ä¸ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿç»„åˆå…³ç³»ï¼Œç”±åè€…æ’ä»–åœ°è´Ÿè´£ç”Ÿå‘½å‘¨æœŸã€‚éƒ¨åˆ†å’Œæ•´ä½“çš„ç”Ÿå‘½å‘¨æœŸä¸€æ ·

    > - ä¹Ÿæ˜¯æ•´ä½“å’Œéƒ¨åˆ†çš„å…³ç³»ï¼Œä½†æ˜¯æ•´ç†å’Œéƒ¨åˆ†ä¸å¯åˆ†å¼€
    > - æ•´ä½“å’Œéƒ¨åˆ†ç”Ÿå‘½å‘¨æœŸä¸€è‡´
    >
    > ![ç»„åˆå…³ç³»](img/10.jpg)

#### 4.2.2 å¯¹è±¡å›¾

- å¯¹è±¡å›¾æè¿°ä¸€ç»„å¯¹è±¡å’Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œå®ƒæ˜¯ç³»ç»ŸçŠ¶æ€çš„æŸä¸€æ—¶åˆ»çš„å¿«ç…§ï¼Œå®ƒçš„ä½¿ç”¨ç›¸å½“æœ‰é™ï¼Œå®ƒä¸»è¦ç”¨äºäº†è§£ç³»ç»Ÿåœ¨æŸä¸ªç‰¹å®šæ—¶åˆ»çš„å…·ä½“çŠ¶å†µå’Œæ•°æ®ç»“æ„
- å¯¹è±¡å›¾è¡¨ç¤ºæ–¹æ³•å’Œç±»å›¾å¤§è‡´ç›¸åŒï¼Œå¯¹è±¡å›¾ä¸­çš„å¯¹è±¡å±æ€§å¯ä»¥æœ‰å…·ä½“å€¼ï¼Œç±»å›¾ä¸­çš„ä¸€ä¸ªç±»å¯ä»¥å¯¹åº”æˆå¯¹è±¡å›¾ä¸­çš„å¤šä¸ªå¯¹è±¡ï¼Œä¾‹å¦‚ï¼š éƒ¨é—¨ç±»çš„è‡ªå…³è”å°±å¯ä»¥å¯¹åº”æˆå¤šä¸ªéƒ¨é—¨ä¹‹é—´çš„å…³è”

### 4.3 å¹¶å‘è§†å›¾

> å¹¶å‘è§†å›¾åŒ…æ‹¬<font color="#08e">`é¡ºåºå›¾`</font>ã€<font color="#08e">`åä½œå›¾`</font>ã€<font color="#08e">`çŠ¶æ€å›¾`</font>ã€<font color="#08e">`æ´»åŠ¨å›¾`</font>ã€<font color="#08e">`ç»„ä»¶å›¾`</font>ã€<font color="#08e">`é…ç½®å›¾`</font>ç»„æˆã€‚

#### 4.3.1 é¡ºåºå›¾ï¼ˆæ—¶åºå›¾ï¼‰

- æ—¶åºå›¾å¼ºè°ƒæ¶ˆæ¯æ—¶é—´é¡ºåºçš„äº¤äº’å›¾
- æ—¶åºå›¾æè¿°ç±»ç³»ç»Ÿä¸­ç±»ä¸ç±»ä¹‹é—´çš„äº¤äº’ï¼Œå®ƒè®²è¿™äº›äº¤äº’å»ºæ¨¡æ¢æˆæ¶ˆæ¯äº¤æ¢
- æ—¶åºå›¾ç”¨äºæè¿°å¯¹è±¡ä¹‹é—´å¦‚ä½•éšç€æ—¶é—´è¿›è¡Œåä½œ
- æ—¶åºå›¾ç”±æ´»åŠ¨è€…(Actor)ã€å¯¹è±¡(Object)ã€æ¶ˆæ¯(Message)ã€ç”Ÿå‘½çº¿(Lifeline)å’Œæ§åˆ¶ç„¦ç‚¹(Focus Of Control)ç»„æˆ
- ä¸åŒå…ƒç´ æœ‰ä¸åŒè¡¨ç¤º
  - å¯¹è±¡æ˜¯ä¸€ä¸ªçŸ©å½¢ï¼Œå¯¹è±¡åç§°ä¸‹æœ‰ä¸‹åˆ’çº¿
  - æ¶ˆæ¯ç”¨ç”±æ–¹å‘çš„ç®­å¤´è¡¨ç¤ºï¼Œè°ƒç”¨æ˜¯å®çº¿ï¼Œè¿”å›æ¶ˆæ¯æ˜¯è™šçº¿
  - ç”Ÿå‘½çº¿ç”±çºµå‘çš„è™šçº¿è¡¨ç¤º
  - æ§åˆ¶ç„¦ç‚¹æ˜¯çºµå‘çš„çŸ©å½¢ï¼Œä¹Ÿå°±æ˜¯æ´»åŠ¨æ¡(Activiation Bar)

![](img/11.png)

#### 4.3.2 åä½œå›¾

- åä½œå›¾æ˜¯æ—¶åºå›¾çš„ä¸€ç§å˜ç§
- åä½œå›¾å¼ºè°ƒçš„æ˜¯å‘é€å’Œæ¥å—æ¶ˆæ¯çš„å¯¹è±¡ä¹‹é—´çš„ç»„ç»‡ç»“æ„
- åä½œå›¾æ˜¾ç¤ºäº†ä¸€ç³»åˆ—å¯¹è±¡å’Œåœ¨è¿™äº›å¯¹è±¡ä¹‹é—´çš„è”ç³»ä»¥åŠå¯¹è±¡é—´å‘é€å’Œæ¥å—çš„æ¶ˆæ¯
- æ—¶åºå›¾ä¸»è¦ä¾§é‡ä¸å¯¹è±¡é—´æ¶ˆæ¯ä¼ é€’åœ¨æ—¶é—´ä¸Šçš„å…ˆåå…³ç³»ï¼Œè€Œåä½œå›¾åˆ™ä¾§é‡ä¸å¯¹è±¡é—´ä»¥åŠå¯¹è±¡å’Œè§’è‰²äº¤äº’çš„é™æ€å…³ç³»

![](img/12.png)

#### 4.3.3 çŠ¶æ€å›¾

ç•¥~

#### 4.3.4 æ´»åŠ¨å›¾

- åœ¨UMLé‡Œï¼Œæ´»åŠ¨å›¾æœ¬è´¨ä¸Šå°±æ˜¯æµç¨‹å›¾ï¼Œ
- å®ƒæè¿°ç³»ç»Ÿçš„æ´»åŠ¨ï¼Œåˆ¤æ–­ç³»ç»Ÿçš„æ´»åŠ¨ï¼Œåˆ¤æ–­ç‚¹å’Œåˆ†æ”¯ç­‰ã€‚

![](img/13.png)

#### 4.3.5 ç»„ä»¶å›¾

- ç»„ä»¶å›¾ç”¨ä¾‹å»ºç«‹ç³»ç»Ÿçš„å„ä¸ªç»„ä»¶ä¹‹é—´çš„å…³ç³»ï¼Œå®ƒä»¬æ˜¯é€šè¿‡è½¯ä»¶æˆ–è€…æ–‡ä»¶ç»„ç»‡åœ¨ä¸€èµ·ï¼Œä½¿ç”¨ç»„ä»¶å›¾å¯ä»¥å¸®åŠ©è¯»è€…äº†è§£æŸä¸ªåŠŸèƒ½ä½äºè½¯ä»¶åŒ…ä¸­çš„å“ªä¸€ä¸ªä½ç½®ï¼Œä»¥åŠå„ä¸ªç‰ˆæœ¬çš„è½¯ä»¶åŒ…å«é‚£äº›åŠŸèƒ½ã€‚
- ç»„ä»¶å›¾å¯ä»¥ç”¨æ¥å¸®åŠ©è®¾è®¡ç³»ç»Ÿçš„æ•´ä½“æ¶æ„

![](img/14.png)

#### 4.3.6 é…ç½®å›¾ï¼ˆéƒ¨ç½²å›¾ï¼‰

- éƒ¨ç½²å›¾æ˜¯æ¥å¸®åŠ©è¯»è€…äº†è§£è½¯ä»¶ä¸­çš„å„ä¸ªç»„ä»¶è¿è¡Œç¡¬ä»¶ä»€ä¹ˆä½ç½®ï¼Œä»¥åŠè¿™äº›ç¡¬ä»¶ä¹‹é—´çš„äº¤äº’å…³ç³»
- èŠ‚ç‚¹ï¼š ç”¨æ¥è¡¨ç¤ºä¸€ç§ç¡¬ä»¶ï¼Œå®ƒå¯ä»¥æ˜¯æœåŠ¡å™¨ï¼Œè®¡ç®—æœºç­‰ã€‚èŠ‚ç‚¹çš„ç¬¦å·æ˜¯ä¸€ä¸ªä¸‰ä½ç›’å­ï¼Œåœ¨å·¦ä¸Šè§’åŒ…å«èŠ‚ç‚¹çš„åç§°
- é€šä¿¡å…³è”ï¼š èŠ‚ç‚¹é€šè¿‡é€šä¿¡å…³è”å»ºç«‹å½¼æ­¤çš„å…³ç³»ï¼Œé‡‡ç”¨ä»èŠ‚ç‚¹åˆ°èŠ‚ç‚¹ç»˜åˆ¶å®çº¿æ¥è¡¨ç¤ºå…³è”

![](img/15.png)

# ç¬¬2ç« ï¼šè®¾è®¡æ¨¡å¼

## é›¶ã€è°ƒè¯•å®‰è£…

```bash
cnpm init -y
tsc --init
npm i ts-node -g
ä¸‹è½½vscodeæ’ä»¶ code runner
ä¸‹è½½å¥½ä¹‹åï¼Œå³é”®`run code`å³å¯~
```



## ä¸€ã€é¢å‘å¯¹è±¡

> <font color=#f00>ä»¥ç±»å’Œå¯¹è±¡ä½œä¸ºç»„ç»‡ä»£ç çš„åŸºæœ¬å•ä½ï¼Œå¹¶å®ç°å°è£…ã€æŠ½è±¡ã€ç»§æ‰¿ã€å¤šæ€å››ä¸ªç‰¹æ€§</font>

é¢å‘å¯¹è±¡çš„è¿‡ç¨‹ä¸­å¾€å¾€ä¼šæ¶‰åŠåˆ°è½¯ä»¶ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µï¼šåˆ†æã€è®¾è®¡ã€ç¼–ç 

- é¢å‘å¯¹è±¡åˆ†æ(OOA) Object Oriented Analysis
- é¢å‘å¯¹è±¡è®¾è®¡(OOD) Object Oriented Design
- é¢å‘å¯¹è±¡ç¼–ç¨‹(OOP)Object Oriented Programming

### 1.1 å°è£…

- æŠŠæ•°æ®å°è£…èµ·æ¥
- å‡å°‘è€¦åˆï¼Œä¸è¯¥å¤–éƒ¨è®¿é—®çš„ä¸è¦è®©å¤–éƒ¨è®¿é—®
- åˆ©äºæ•°æ®çš„æ¥å£æƒé™ç®¡ç†
- ä»…æš´éœ²æœ‰é™çš„å¿…è¦æ¥å£ï¼Œæé«˜ç±»çš„æ˜“ç”¨æ€§
- å®ç°
  - public:å…¬æœ‰ä¿®é¥°ç¬¦ï¼Œå¯ä»¥åœ¨ç±»å†…æˆ–è€…ç±»å¤–ä½¿ç”¨publicä¿®é¥°çš„å±æ€§æˆ–è€…è¡Œä¸ºï¼Œé»˜è®¤ä¿®é¥°ç¬¦
  - protected:å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦ï¼Œå¯ä»¥æœ¬ç±»å’Œå­ç±»ä¸­ä½¿ç”¨protectedä¿®é¥°çš„å±æ€§å’Œè¡Œä¸º
  - private : ç§æœ‰ä¿®é¥°ç¬¦ï¼Œåªå¯ä»¥åœ¨ç±»å†…ä½¿ç”¨privateä¿®é¥°çš„å±æ€§å’Œè¡Œä¸º

```typescript
class Animal {
    public name: string;
    protected age: number;
    private weight: number;
    constructor(name: string, age: number, weight: number) {
        this.name = name;
        this.age = age;
        this.weight = weight;
    }
}
class Person extends Animal {
    private money: number;
    constructor(name: string, age: number, weight: number, money: number) {
        super(name, age, weight);
        this.money = money;
    }
    getName() {
        console.log(this.name);
    }
    getAge() {
        console.log(this.age);
    }
    getWeight() {
        console.log(this.weight);
    }
    getMoney() {
        console.log(this.money);
    }
}
let p = new Person('zfpx', 9, 100, 100);
console.log(p.name);
console.log(p.age);
console.log(p.weight);
```

### 1.2 æŠ½è±¡

- æŠ½è±¡ä¸»è¦æ˜¯éšè—æ–¹æ³•çš„å®ç°ï¼Œè®©è°ƒç”¨è€…åªå…³å¿ƒæœ‰å“ªäº›åŠŸèƒ½è€Œä¸æ˜¯å…³å¿ƒåŠŸèƒ½çš„å®ç°
- æŠ½è±¡å¯ä»¥æé«˜ä»£ç çš„å¯æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ï¼Œä¿®æ”¹å®ç°ä¸éœ€è¦æ”¹å˜å®šä¹‰ï¼Œå¯ä»¥å‡å°‘ä»£ç çš„æ”¹åŠ¨èŒƒå›´

```typescript
interface IStorage {
    save(key: any, value: any): void;
    read(key: any): void;
}
class LocalStorage implements IStorage {
    save(key: any, value: any) {
        localStorage.setItem(key, value);
    }
    read(key: any) {
        return localStorage.getItem(key);
    }
}
class User {
    constructor(public name: string, public storage: IStorage) {

    }
    save() {
        this.storage.save('userInfo', JSON.stringify(this));
    }
    read() {
        return this.storage.read('userInfo');
    }
}
let user = new User('å¼ ä¸‰', new LocalStorage());
user.save();
user.read();
```

### 1.3 ç»§æ‰¿

- ç»§æ‰¿ä¸»è¦çš„è¦å¤„æ˜¯å®ç°ä»£ç å¤ç”¨
- ç»§æ‰¿å¯ä»¥æŠŠçˆ¶ç±»å’Œå­ç±»çš„å…¬å…±æ–¹æ³•æŠ½ç¦»å‡ºæ¥ï¼Œæé«˜å¤ç”¨ï¼Œå‡å°‘å†—ä½™
- æ˜¯ä¸€ç§ `is-a` å…³ç³»

```typescript
export { };
class Animal {
    name: string;
    constructor(name: string) {
        this.name = name;
    }
    eat() {
        console.log(`${this.name} eat`)
    }
}
let animal = new Animal('åŠ¨ç‰©');
animal.eat();

class Dog extends Animal {
    age: number;
    constructor(name: string, age: number) {
        super(name);
        this.age = age;
    }
    speak() {
        console.log(`${this.name} is barking!`);
    }
}
let dog = new Dog('ğŸ¶', 5);
dog.eat();
dog.speak();
```

### 1.4 å¤šæ€

- å¤šæ€æ˜¯æŒ‡ï¼Œå­ç±»å¯ä»¥æ›¿æ¢çˆ¶ç±»
- ä¿æŒå­ç±»çš„å¼€æ”¾æ€§å’Œçµæ´»æ€§ï¼Œå¯ä»¥é‡å†™çˆ¶ç±»ä¸­çš„æ–¹æ³•
- å®ç°é¢å‘æ¥å£ç¼–ç¨‹

```typescript
class Animal {
    public name: string;
    protected age: number;
    private weight: number;
    constructor(name: string, age: number, weight: number) {
        this.name = name;
        this.age = age;
        this.weight = weight;
    }
    speak() {
        throw new Error('æ­¤æ–¹æ³•å¿…é¡»ç”±å­ç±»å®ç°!');
    }
}
class Person extends Animal {
    private money: number;
    constructor(name: string, age: number, weight: number, money: number) {
        super(name, age, weight);
        this.money = money;
    }
    getName() {
        console.log(this.name);
    }
    getAge() {
        console.log(this.age);
    }
    getMoney() {
        console.log(this.money);
    }
    speak() {
        console.log('ä½ å¥½!');
    }

}
class Dog extends Animal {
    constructor(name: string, age: number, weight: number) {
        super(name, age, weight);
    }
    speak() {
        console.log('æ±ªæ±ªæ±ª!');
    }
}
let p = new Person('zfpx', 10, 10, 10);
p.speak();
let d = new Dog('zfpx', 10, 10);
d.speak();
```

## äºŒã€è®¾è®¡åŸåˆ™

### 2.1 ä»€ä¹ˆæ˜¯è®¾è®¡ï¼Ÿ

- æŒ‰å“ªä¸€ç§æ€è·¯æˆ–è€…æ ‡å‡†æ¥å®ç°åŠŸèƒ½
- åŠŸèƒ½ç›¸åŒï¼Œå¯ä»¥æœ‰ä¸åŒè®¾è®¡çš„æ–¹å¼
- éœ€æ±‚å¦‚æœä¸æ–­å˜åŒ–ï¼Œè®¾è®¡çš„ä½œç”¨æ‰èƒ½ä½“ç°å‡ºæ¥

### 2.2 SOLIDäº”å¤§è®¾è®¡åŸåˆ™

| é¦–å­—æ¯ | æŒ‡ä»£         | æ¦‚å¿µ                                                         |
| :----- | :----------- | :----------------------------------------------------------- |
| S      | å•ä¸€èŒè´£åŸåˆ™ | å•ä¸€åŠŸèƒ½åŸåˆ™è®¤ä¸ºå¯¹è±¡åº”è¯¥ä»…å…·æœ‰ä¸€ç§`å•ä¸€åŠŸèƒ½`çš„æ¦‚å¿µ           |
| O      | å¼€æ”¾å°é—­åŸåˆ™ | å¼€é—­åŸåˆ™è®¤ä¸º`è½¯ä»¶ä½“åº”è¯¥æ˜¯å¯¹äºæ‰©å±•å¼€æ”¾çš„ï¼Œä½†æ˜¯å¯¹äºä¿®æ”¹å°é—­çš„`çš„æ¦‚å¿µ |
| L      | é‡Œæ°æ›¿æ¢åŸåˆ™ | é‡Œæ°æ›¿æ¢åŸåˆ™è®¤ä¸ºç¨‹åºä¸­çš„å¯¹è±¡åº”è¯¥æ˜¯å¯ä»¥åœ¨ä¸æ”¹å˜ç¨‹åºæ­£ç¡®æ€§çš„å‰æä¸‹`è¢«å®ƒçš„å­ç±»æ‰€æ›¿æ¢`çš„çš„æ¦‚å¿µ |
| I      | æ¥å£éš”ç¦»åŸåˆ™ | æ¥å£éš”ç¦»åŸåˆ™è®¤ä¸º`å¤šä¸ªç‰¹å®šå®¢æˆ·ç«¯æ¥å£è¦å¥½äºä¸€ä¸ªå®½æ³›ç”¨é€”çš„æ¥å£`çš„æ¦‚å¿µ |
| D      | ä¾èµ–åè½¬åŸåˆ™ | ä¾èµ–åè½¬åŸåˆ™è®¤ä¸ºä¸€ä¸ªæ–¹æ³•åº”è¯¥éµä»`ä¾èµ–äºæŠ½è±¡è€Œä¸æ˜¯ä¸€ä¸ªå®ä¾‹`çš„æ¦‚å¿µ,ä¾èµ–æ³¨å…¥æ˜¯è¯¥åŸåˆ™çš„ä¸€ç§å®ç°æ–¹å¼ã€‚ |

#### 2.2.1 O å¼€æ”¾å°é—­åŸåˆ™

- `Open Closed Principle`
- å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
- å¢åŠ éœ€æ±‚æ—¶ï¼Œæ‰©å±•æ–°ä»£ç ï¼Œè€Œéä¿®æ”¹å·²æœ‰ä»£ç 
- å¼€é—­åŸåˆ™æ˜¯è®¾è®¡æ¨¡å¼ä¸­çš„æ€»åŸåˆ™
- å¯¹è¿‘æœŸå¯èƒ½ä¼šå˜åŒ–å¹¶ä¸”å¦‚æœæœ‰å˜åŒ–ä½†æ”¹åŠ¨é‡å·¨å¤§çš„åœ°æ–¹è¦å¢åŠ æ‰©å±•ç‚¹,æ‰©å±•ç‚¹è¿‡å¤šä¼šé™ä½å¯è¯»æ€§

```js
class Customer {
    constructor(public rank: string) { }
}
class Product {
    constructor(public name: string, public price: number) {

    }
    cost(customer: Customer) {
        switch (customer.rank) {
            case 'member':
                return this.price * .8;
            case 'vip':
                return this.price * .6;
            default:
                return this.price;
        }
    }
}
let p1 = new Product('ç¬”è®°æœ¬ç”µè„‘', 1000);
let member = new Customer('member');
let vip = new Customer('vip');
let guest = new Customer('guest');
console.log(p1.cost(member));
console.log(p1.cost(vip));
console.log(p1.cost(guest));
class Customer {
+    constructor(public rank: string, public discount: number = 1) { }
+    getDiscount() {
+        return this.discount;
+    }
}
class Product {
    constructor(public name: string, public price: number) {

    }
    cost(customer: Customer) {
-        /*  switch (customer.rank) {
-             case 'member':
-                 return this.price * .8;
-             case 'vip':
-                 return this.price * .6;
-             default:
-                 return this.price;
-         } */
+        return this.price * customer.getDiscount();
    }
}
+let p1 = new Product('ç¬”è®°æœ¬ç”µè„‘', 1000);
+let member = new Customer('member', .8);
+let vip = new Customer('vip', .6);
let guest = new Customer('guest');
console.log(p1.cost(member));
console.log(p1.cost(vip));
console.log(p1.cost(guest));
import axios, { AxiosInstance, AxiosRequestConfig } from 'axios';
let instance: AxiosInstance = axios.create();
instance.interceptors.request.use((config: AxiosRequestConfig) => {
    config.url = 'http://localhost:8080' + config.url;
    return config;
});

instance.interceptors.response.use(response => {
    if (response.status !== 200 || response.data.code != 0) {
        return Promise.reject(response);
    } else {
        return response.data.data;
    }
})
/**
 * {code:0,data:{id:1,name:'zhufeng'}}
 */
instance({
    url: '/api/users'
}).then(result => {
    console.log(result);
}, error => {
    console.error(error);
});
```

#### 2.2.2 S å•ä¸€èŒè´£åŸåˆ™

- Single responsibility principle
- ä¸€ä¸ªç±»æˆ–è€…æ¨¡å—åªè´Ÿè´£å®Œæˆä¸€ä¸ªèŒè´£,å¦‚æœåŠŸèƒ½ç‰¹åˆ«å¤æ‚å°±è¿›è¡Œæ‹†åˆ†
- å•ä¸€èŒè´£å¯ä»¥é™ä½ç±»çš„å¤æ‚æ€§ï¼Œæé«˜ä»£ç å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§
- å½“ç±»ä»£ç è¡Œæ•°è¿‡å¤šã€æ–¹æ³•è¿‡å¤šã€åŠŸèƒ½å¤ªå¤šã€èŒè´£å¤ªæ‚çš„æ—¶å€™å°±è¦å¯¹ç±»è¿›è¡Œæ‹†åˆ†äº†
- æ‹†åˆ†ä¸èƒ½è¿‡åº¦ï¼Œå¦‚æœæ‹†åˆ†è¿‡åº¦ä¼šæŸå¤±å†…èšæ€§å’Œç»´æŠ¤æ€§
- [lodashjs](https://www.lodashjs.com/docs/latest)
- [jquery](https://api.jquery.com/)

![å•ä¸€èŒè´£åŸåˆ™](img/16.png)

```diff
class Product {
    public name: string;
-    public categoryName: string;
-    public categoryIcon: string;
+     public category:Category;
}
+class Category {
+    public name: string;
+    public icon: string;
+}
```

#### 2.2.3 L é‡Œæ°æ›¿æ¢åŸåˆ™

- Liskov Substitution Principle
- æ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡
- å­ç±»èƒ½æ›¿æ¢æ‰çˆ¶ç±»ï¼Œä½¿ç”¨è€…å¯èƒ½æ ¹æœ¬å°±ä¸éœ€è¦çŸ¥é“æ˜¯çˆ¶ç±»è¿˜æ˜¯å­ç±»,åä¹‹åˆ™ä¸è¡Œ
- é‡Œæ°æ›¿æ¢åŸåˆ™æ˜¯å¼€é—­åŸåˆ™çš„å®ç°åŸºç¡€,ç¨‹åºè®¾è®¡çš„æ—¶å€™å°½é‡ä½¿ç”¨åŸºç±»å®šä¹‰åŠå¼•ç”¨ï¼Œè¿è¡Œæ—¶å†å†³å®šä½¿ç”¨å“ªä¸ªå­ç±»
- é‡Œæ°æ›¿æ¢åŸåˆ™å¯ä»¥æé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œæé«˜ä»£ç çš„å¯æ‰©å±•æ€§ï¼Œä¹Ÿå¢åŠ äº†è€¦åˆæ€§
- ç›¸å¯¹äºå¤šæ€ï¼Œè¿™ä¸ªåŸåˆ™æ˜¯è®²çš„æ˜¯ç±»å¦‚ä½•è®¾è®¡ï¼Œå­ç±»å¦‚æœè¿åäº†çˆ¶ç±»çš„åŠŸèƒ½åˆ™è¡¨ç¤ºè¿åäº†é‡Œæ°æ›¿æ¢åŸåˆ™

![é‡Œæ°æ›¿æ¢åŸåˆ™](img/17.png)

```js
abstract class AbstractDrink {
    abstract getName(): string;
}
class CocaCola extends AbstractDrink {
    getName(): string {
        return 'å¯ä¹';
    }
}
class Sprite extends AbstractDrink {
    getName(): string {
        return 'é›ªç¢§';
    }
}
class Fanta extends AbstractDrink {
    getName(): string {
        return 'èŠ¬è¾¾';
    }
}
class Customer {
    drink(drink: AbstractDrink) {
        console.log('å–' + drink.getName());
    }
}
let customer = new Customer();
let cocaCola = new CocaCola();
let sprite = new Sprite();
let fanta = new Fanta();
customer.drink(cocaCola);
customer.drink(sprite);
customer.drink(fanta);
import React from 'react';
import ReactDOM from 'react-dom';
class App extends React.Component {
    render() {
        return (
            <div>App </div>
        )
    }
}
let element = React.createElement(App);
ReactDOM.render(element, document.getElementById('root'));
abstract class AbstractDrink {
    abstract getName(): any;
}
class CocaCola extends AbstractDrink {
    getName(): any {
        return 100;
    }
}
```

#### 2.2.4 D ä¾èµ–å€’ç½®åŸåˆ™

- Dependence Inversion Principle
- é¢å‘æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“å®ç°
- è¦æ±‚æˆ‘ä»¬åœ¨ç¨‹åºä»£ç ä¸­ä¼ é€’å‚æ•°æ—¶æˆ–åœ¨å…³è”å…³ç³»ä¸­ï¼Œå°½é‡å¼•ç”¨å±‚æ¬¡é«˜çš„æŠ½è±¡å±‚ç±»
- ä½¿ç”¨æ–¹åªå…³æ³¨æ¥å£è€Œä¸å…³æ³¨å…·ä½“ç±»çš„å®ç°

![ä¾èµ–å€’ç½®åŸåˆ™](img/18.png)

```js
abstract class GirlFriend {
    public age: number;
    public height: number;
    public abstract cook(): void;
}
class LinZhiLing extends GirlFriend {
    public cook(): void {

    }
}
class HanMeiMei extends GirlFriend {
    public cook(): void {

    }
}
class SingleDog {
    constructor(public girlFriend: GirlFriend) {

    }
}
let s1 = new SingleDog(new LinZhiLing());
let s2 = new SingleDog(new HanMeiMei());
import { createStore } from 'redux';
let store = createStore(state => state);
export interface Action<T = any> {
    type: T
}
export interface AnyAction extends Action {
    // Allows any extra properties to be defined in an action.
    [extraProps: string]: any
}
let action: AnyAction = { type: 'increment', payload: 5 }
store.dispatch(action);
```

#### 2.2.5 I æ¥å£éš”ç¦»åŸåˆ™

- Interface Segregation Principle
- ä¿æŒæ¥å£çš„å•ä¸€ç‹¬ç«‹ï¼Œé¿å…å‡ºç°èƒ–æ¥å£
- å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ï¼Œç±»é—´çš„ä¾èµ–å…³ç³»åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Š
- æ¥å£å°½é‡ç»†åŒ–ï¼Œè€Œä¸”æ¥å£ä¸­çš„æ–¹æ³•å°½é‡çš„å°‘
- ç±»ä¼¼äºå•ä¸€èŒè´£åŸåˆ™ï¼Œæ›´å…³æ³¨æ¥å£

```js
interface IUserManager {
    updateUserInfo(): void;
    updatePassword(): void;
}
interface IProductManager {
    updateProduct(): void;
    updatePrice(): void;
}
```

![æ¥å£éš”ç¦»åŸåˆ™](img/19.jpg)

```js
interface Running {
    run(): void;
}
interface Flying {
    fly(): void;
}
interface Swimming {
    swim(): void;
}
class Automobile implements Running, Flying, Swimming {
    run() { }
    fly() { }
    swim() { }
}
```

### 2.3 è¿ªç±³ç‰¹æ³•åˆ™

- Law of Demeterï¼ŒLOD
- æœ‰æ—¶å€™ä¹Ÿå«åšæœ€å°‘çŸ¥è¯†åŸåˆ™
- ä¸€ä¸ªè½¯ä»¶å®ä½“åº”å½“å°½å¯èƒ½å°‘åœ°ä¸å…¶å®ƒå®ä½“å‘ç”Ÿç›¸äº’ä½œç”¨
- è¿ªç±³ç‰¹æ³•åˆ™çš„åˆè¡·åœ¨äºé™ä½ç±»ä¹‹é—´çš„è€¦åˆ
- ç±»å®šä¹‰æ—¶å°½é‡è¦å®ç°å†…èš,å°‘ä½¿ç”¨`public`ä¿®é¥°ç¬¦ï¼Œå°½é‡ä½¿ç”¨`private`ã€`protected` ç­‰

![è¿ªç±³ç‰¹æ³•åˆ™](img/20.png)

```js
class Salesman {
    constructor(public name: string) {

    }
    sale() {
        console.log(this.name + ' é”€å”®ä¸­....');
    }
}
class SaleManager {
    private salesmen: Array<Salesman> = [new Salesman('å¼ ä¸‰'), new Salesman('æå››')];
    sale() {
        this.salesmen.forEach(salesman => salesman.sale());
    }
}
class CEO {
    private saleManager: SaleManager = new SaleManager();
    sale() {
        this.saleManager.sale();
    }
}
let ceo = new CEO();
ceo.sale();
```

### 2.4 åˆæˆå¤ç”¨åŸåˆ™

#### 2.4.1 ç±»çš„å…³ç³»

- ç±»ä¹‹é—´æœ‰ä¸‰ç§åŸºæœ¬å…³ç³»ï¼Œåˆ†åˆ«æ˜¯å…³è”(èšåˆå’Œç»„åˆ)ã€æ³›åŒ–å’Œä¾èµ–

- å¦‚æœä¸€ä¸ªç±»å•å‘ä¾èµ–å¦ä¸€ä¸ªç±»,é‚£ä¹ˆå®ƒä»¬ä¹‹é—´å°±æ˜¯å•å‘å…³è”ã€‚å¦‚æœå½¼æ­¤ä¾èµ–,åˆ™ä¸ºç›¸äº’ä¾èµ–,å³åŒå‘å…³è”

- å…³è”å…³ç³»åŒ…æ‹¬ä¸¤ç§ç‰¹ä¾‹ï¼šèšåˆå’Œç»„åˆ

  - èšåˆï¼Œç”¨æ¥è¡¨ç¤ºæ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»æˆ–è€…`æ‹¥æœ‰`å…³ç³»,ä»£è¡¨éƒ¨åˆ†çš„å¯¹è±¡å¯èƒ½ä¼šè¢«æ•´ä½“æ‹¥æœ‰ï¼Œä½†å¹¶ä¸å®šå®šä¼šéšç€æ•´ä½“çš„æ¶ˆäº¡è€Œé”€æ¯,æ¯”å¦‚ç­çº§å’Œå­¦ç”Ÿ

  - åˆæˆæˆ–è€…è¯´ç»„åˆè¦æ¯”èšåˆå…³ç³»å¼ºçš„å¤šï¼Œéƒ¨åˆ†å’Œæ•´ä½“çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€è‡´çš„,æ¯”å¦‚äººå’Œå™¨å®˜ä¹‹é—´

    ![](img/21.png)

#### 2.4.2 åˆæˆå¤ç”¨åŸåˆ™

- åˆæˆå¤ç”¨åŸåˆ™æ˜¯é€šè¿‡å°†å·²æœ‰çš„å¯¹è±¡çº³å…¥æ–°å¯¹è±¡ä¸­ï¼Œä½œä¸ºæ–°å¯¹è±¡çš„æˆå‘˜å¯¹è±¡æ¥å®ç°çš„
- æ–°å¯¹è±¡å¯ä»¥è°ƒç”¨å·²æœ‰å¯¹è±¡çš„åŠŸèƒ½ï¼Œä»è€Œè¾¾åˆ°å¤ç”¨
- åŸåˆ™æ˜¯å°½é‡é¦–å…ˆä½¿ç”¨ç»„åˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿
- ä¸“ä¸šäººåšä¸“ä¸šäº‹

```js
class Cooker {
    cook() {

    }
}
class Person {
    private cooker: Cooker = new Cooker();
    cook() {
        this.cooker.cook();
    }
}
```

### 2.5 æ€»ç»“

- å¼€é—­åŸåˆ™æ˜¯æ ¸å¿ƒï¼Œå¯¹ä¿®æ”¹å…³é—­å¯¹æ‰©å±•å¼€æ”¾æ˜¯è½¯ä»¶è®¾è®¡çš„åŸºçŸ³
- å•ä¸€èŒè´£è¦æ±‚æˆ‘ä»¬è®¾è®¡æ¥å£å’Œæ¨¡å—åŠŸèƒ½çš„æ—¶å€™å°½é‡ä¿è¯å•ä¸€æ€§å’ŒåŸå­æ€§ï¼Œä¿®æ”¹ä¸€æ¡ä¸å½±å“å…¨å±€å’Œå…¶å®ƒæ¨¡å—
- é‡Œæ°æ›¿æ¢åŸåˆ™å’Œä¾èµ–å€’ç½®åŸåˆ™è¦æ±‚é¢å‘æ¥å£å’ŒæŠ½è±¡ç¼–ç¨‹,ä¸è¦ä¾èµ–å…·ä½“å®ç°ï¼Œå¦åˆ™å®ç°ä¸€æ”¹ï¼Œä¸Šå±‚è°ƒç”¨è€…å°±è¦å¯¹åº”ä¿®æ”¹

### 2.6 å¦‚ä½•å†™å‡ºå¥½ä»£ç ?

- å¯ç»´æŠ¤æ€§ BUGæ˜¯å¦å¥½æ”¹?
- å¯è¯»æ€§ æ˜¯å¦å®¹æ˜“çœ‹æ‡‚?
- å¯æ‰©å±•æ€§ æ˜¯å¦å¯ä»¥æ·»åŠ æ–°åŠŸèƒ½?
- çµæ´»æ€§ æ·»åŠ æ–°åŠŸèƒ½æ˜¯å¦å®¹æ˜“?è€æ–¹æ³•å’Œæ¥å£æ˜¯å¦å®¹æ˜“å¤ç”¨?
- ç®€æ´æ€§ ä»£ç æ˜¯å¦ç®€å•æ¸…æ™°?
- å¯å¤ç”¨æ€§ ç›¸åŒçš„ä»£ç ä¸è¦å†™2é?
- å¯æµ‹è¯•æ€§ æ˜¯å¦æ–¹ä¾¿å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•?

## ä¸‰ã€ 22ç§è®¾è®¡æ¨¡å¼æ€»æ‹¬

### 3.1 è®¾è®¡æ¨¡å¼åˆ†ç±»

> é€šå¸¸å¯ä»¥åˆ†ä¸º `åˆ›å»ºå‹`ã€`ç»“æ„å‹`ã€`è¡Œä¸ºå‹`ã€‚

#### 3.1.1 åˆ›å»ºå‹

- `é‡è¦: å·¥å‚æ¨¡å¼(å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€ç®€å•å·¥å‚æ¨¡å¼)ã€å»ºé€ è€…æ¨¡å¼ã€å•ä¾‹æ¨¡å¼`
- ä¸é‡è¦: åŸå‹æ¨¡å¼

#### 3.1.2 ç»“æ„å‹

- `é‡è¦: ä»£ç†æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼`
- ä¸é‡è¦: å¤–è§‚æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€äº«å…ƒæ¨¡å¼ 

#### 3.1.3 è¡Œä¸ºå‹

- `é‡è¦: è§‚å¯Ÿè€…æ¨¡å¼ã€æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€èŒè´£é“¾æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼`
- ä¸é‡è¦: è®¿é—®è€…æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼

<font color=#f90>æ³¨æ„ï¼šä»¥ä¸Šæ€»å…±åˆ†åˆ«22ç§ï¼Œä¸javaä¸åŒçš„æ˜¯`åˆ›å»ºå‹`ä¸­çš„å·¥å‚æ¨¡å¼ï¼Œjavaåˆ†ä¸ºï¼š<font color=#f00>å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ã€åŸå‹æ¨¡å¼</font>è¿™äº”ç§ã€‚</font>

## å››ã€å·¥å‚æ¨¡å¼

### 4.1 ç®€å•å·¥å‚æ¨¡å¼

> ç®€å•å·¥å‚æ¨¡å¼æ˜¯ç”±ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ç§äº§å“ç±»çš„å®ä¾‹ã€‚å³<font color="#f00">`ä¸€ä¸ªç±»é€šè¿‡ä¼ é€’çš„å‚æ•°ä¸åŒç”Ÿæˆä¸åŒçš„å®ä¾‹`</font>ã€‚

#### 4.1.1 ç±»å›¾æ¼”ç¤º

![ç®€å•å·¥å‚](img/22.png)

#### 4.1.2 ä»£ç æ¼”ç¤º

```tsx
abstract class Coffee {
    constructor(public name: string) {

    }
}
class AmericanoCoffee extends Coffee {
    constructor(public name: string) {
        super(name);
    }
}
class LatteCoffee extends Coffee {
    constructor(public name: string) {
        super(name);
    }
}
class CappuccinoCoffee extends Coffee {
    constructor(public name: string) {
        super(name);
    }
}

class CafÃ© {
    static order(name: string) {
        switch (name) {
            case 'Americano':
                return new AmericanoCoffee('ç¾å¼å’–å•¡');
            case 'Latte':
                return new LatteCoffee('æ‹¿é“å’–å•¡');
            case 'Cappuccino':
                return new LatteCoffee('å¡å¸ƒå¥‡è¯º');
            default:
                return null;
        }
    }
}
console.log(CafÃ©.order('Americano'));
console.log(CafÃ©.order('Latte'));
console.log(CafÃ©.order('Cappuccino'));

```

#### 4.1.3 ç¼ºç‚¹

- å¦‚æœäº§å“çš„ç§ç±»éå¸¸å¤š`switch case`çš„åˆ¤æ–­ä¼šå˜å¾—éå¸¸å¤š
- ä¸ç¬¦åˆå¼€æ”¾â€”å°é—­åŸåˆ™,å¦‚æœè¦å¢åŠ æˆ–åˆ é™¤ä¸€ä¸ªäº§å“ç§ç±»ï¼Œå°±è¦ä¿®æ”¹`switch case`çš„åˆ¤æ–­ä»£ç 

#### 4.1.4 å‰ç«¯åº”ç”¨åœºæ™¯

ä¾‹å¦‚reactæºç ä¸­çš„[createElement](https://github.com/facebook/react/blob/main/packages/react/src/ReactElement.js#L313-L395Â )

æ–¹æ³•

```tsx
export function createElement(type, config, children) {
    return ReactElement(
        type,
        key,
        ref,
        self,
        source,
        ReactCurrentOwner.current,
        props,
    );
}
```

###   4.2 å·¥å‚æ–¹æ³•æ¨¡å¼

- å·¥å‚æ–¹æ³•æ¨¡å¼`Factory Method`,åˆç§°å¤šæ€æ€§å·¥å‚æ¨¡å¼ã€‚
- åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­,æ ¸å¿ƒçš„å·¥å‚ç±»ä¸å†è´Ÿè´£æ‰€æœ‰çš„äº§å“çš„åˆ›å»ºï¼Œè€Œæ˜¯å°†å…·ä½“åˆ›å»ºçš„å·¥ä½œäº¤ç»™å·¥å‚å­ç±»å»åšã€‚

#### 4.2.1 ç±»å›¾æ¼”ç¤º

![å·¥å‚æ–¹æ³•æ¨¡å¼](img/23.png)

#### 4.2.2 ä»£ç æ¼”ç¤º

```js
export { }
abstract class Coffee {
    constructor(public name: string) {

    }
}
abstract class Factory {
    abstract createCoffee(): Coffee;
}
class AmericanoCoffee extends Coffee {
    constructor(public name: string) {
        super(name);
    }
}

class AmericanoCoffeeFactory extends Factory {
    createCoffee() {
        return new AmericanoCoffee('ç¾å¼å’–å•¡')
    }
}

class LatteCoffee extends Coffee {
    constructor(public name: string) {
        super(name);
    }
}
class LatteCoffeeFactory extends Factory {
    createCoffee() {
        return new LatteCoffee('æ‹¿é“å’–å•¡')
    }
}
class CappuccinoCoffee extends Coffee {
    constructor(public name: string) {
        super(name);
    }
}
class CappuccinoFactory extends Factory {
    createCoffee() {
        return new CappuccinoCoffee('å¡å¸ƒå¥‡è¯º')
    }
}
class CafÃ© {
    static order(name: string) {
        switch (name) {
            case 'Americano':
                return new AmericanoCoffeeFactory().createCoffee();
            case 'Latte':
                return new LatteCoffeeFactory().createCoffee();
            case 'Cappuccino':
                return new CappuccinoFactory().createCoffee();
            default:
                return null;
        }
    }
}
console.log(CafÃ©.order('Americano'));
console.log(CafÃ©.order('Latte'));
console.log(CafÃ©.order('Cappuccino'));
```

#### 4.2.3 åº”ç”¨åœºæ™¯

- [createFactory](https://github.com/facebook/react/blob/master/packages/react/src/ReactElement.js#L401-L409)

### 4.3 æŠ½è±¡å·¥å‚æ¨¡å¼

- æŠ½è±¡å·¥å‚æ¨¡å¼å¯ä»¥å‘å®¢æˆ·ç«¯æä¾›ä¸€ä¸ªæ¥å£ï¼Œä½¿å®¢æˆ·ç«¯åœ¨ä¸å¿…æŒ‡å®šäº§å“çš„å…·ä½“çš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºå¤šä¸ªäº§å“æ—ä¸­çš„äº§å“å¯¹è±¡
- å·¥å‚æ–¹æ³•æ¨¡å¼é’ˆå¯¹çš„æ˜¯åŒä¸€ç±»æˆ–åŒç­‰çº§äº§å“,è€ŒæŠ½è±¡å·¥å‚æ¨¡å¼é’ˆå¯¹çš„æ˜¯å¤šç§ç±»çš„äº§å“è®¾è®¡
- ç³»ç»Ÿä¸­æœ‰å¤šä¸ªäº§å“æ—ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚è´Ÿè´£åˆ›å»ºåŒä¸€æ—ä½†å±äºä¸åŒäº§å“ç­‰çº§(äº§å“ç§ç±»)çš„äº§å“
- äº§å“æ—æ˜¯ä¸€ç»„ç›¸å…³æˆ–ç›¸äº’ä¾èµ–çš„å¯¹è±¡
- ç³»ç»Ÿä¸€æ¬¡åªèƒ½æ¶ˆè´¹æŸä¸€æ—äº§å“ï¼Œå³ç›¸åŒäº§å“æ—çš„äº§å“æ˜¯ä¸€èµ·è¢«ä½¿ç”¨çš„
- å½“ç³»ç»Ÿéœ€è¦æ–°å¢ä¸€ä¸ªäº§å“æ—æ—¶ï¼Œåªéœ€è¦å¢åŠ æ–°çš„å·¥å‚ç±»å³å¯ï¼Œæ— éœ€ä¿®æ”¹æºä»£ç ï¼›ä½†æ˜¯å¦‚æœéœ€è¦äº§å“æ—ä¸­å¢åŠ ä¸€ä¸ªæ–°ç§ç±»çš„äº§å“æ—¶ï¼Œåˆ™æ‰€æœ‰çš„å·¥å‚ç±»éƒ½éœ€è¦ä¿®æ”¹

#### 4.3.1 ç±»å›¾æ¼”ç¤º

![æŠ½è±¡å·¥å‚](img/24.png)

#### 4.3.2 ä»£ç æ¼”ç¤º

```js
export { };
abstract class AmericanoCoffee { }
abstract class LatteCoffee { }
abstract class CappuccinoCoffee { }

class StarbucksAmericanoCoffee extends AmericanoCoffee { }
class StarbucksLatteCoffee extends LatteCoffee { }
class StarbucksCappuccinoCoffee extends CappuccinoCoffee { }

class LuckinAmericanoCoffee extends AmericanoCoffee { }
class LuckinLatteCoffee extends LatteCoffee { }
class LuckinCappuccinoCoffee extends CappuccinoCoffee { }

abstract class CafeFactory {
    abstract createAmericanoCoffee(): AmericanoCoffee;
    abstract createLatteCoffee(): LatteCoffee;
    abstract createCappuccinoCoffee(): CappuccinoCoffee;
}
class StarbucksCafeFactory extends CafeFactory {
    createAmericanoCoffee() {
        return new StarbucksAmericanoCoffee();
    }
    createLatteCoffee() {
        return new StarbucksLatteCoffee();
    }
    createCappuccinoCoffee() {
        return new StarbucksCappuccinoCoffee();
    }
}
class LuckinCafeFactory extends CafeFactory {
    createAmericanoCoffee() {
        return new LuckinAmericanoCoffee();
    }
    createLatteCoffee() {
        return new LuckinLatteCoffee();
    }
    createCappuccinoCoffee() {
        return new LuckinCappuccinoCoffee();
    }
}

let starbucksCafeFactory = new StarbucksCafeFactory();
console.log(starbucksCafeFactory.createAmericanoCoffee());
console.log(starbucksCafeFactory.createCappuccinoCoffee());
console.log(starbucksCafeFactory.createLatteCoffee());

let luckinCafeFactory = new LuckinCafeFactory();
console.log(luckinCafeFactory.createAmericanoCoffee());
console.log(luckinCafeFactory.createCappuccinoCoffee());
console.log(luckinCafeFactory.createLatteCoffee());
```

## äº”ã€å•ä¾‹æ¨¡å¼

é¦–å…ˆï¼Œå•ä¾‹æ¨¡å¼æœ‰3ä¸ªç‰¹ç‚¹â†“â†“â†“

1. å•ä¾‹ç±»åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼›
2. è¯¥å•ä¾‹å¯¹è±¡å¿…é¡»ç”±å•ä¾‹ç±»è‡ªè¡Œåˆ›å»ºï¼›
3. å•ä¾‹ç±»å¯¹å¤–æä¾›ä¸€ä¸ªè®¿é—®è¯¥å•ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ï¼›

### 5.1ã€ç±»å›¾æ¼”ç¤º

![å•ä¾‹ç±»å›¾](img/25.jpg)

### 5.2 åŸºæœ¬ä»£ç 

#### 5.2.1 ES6å•ä¾‹æ¨¡å¼

```tsx
export { };
class Window {
    private static instance: Window;
    private constructor() { }
    static getInstance() {
        if (!Window.instance) {
            Window.instance = new Window();
        }
        return Window.instance;
    }
}
//new Window();
var w1 = Window.getInstance();
var w2 = Window.getInstance();
console.log(w1 === w2);
```

#### 5.2.2 ES5å•ä¾‹æ¨¡å¼

```js
interface Window {
    hello: any
}
function Window() { }
Window.prototype.hello = function () {
    console.log('hello');
}
Window.getInstance = (function () {
    let window: Window;
    return function () {
        if (!window)
            window = new (Window as any)();
        return window;
    }
})();
let window = Window.getInstance();
window.hello();
```

### 5.3 åº”ç”¨åœºæ™¯

#### 5.3.1 reduxä¸­çš„createStore

```tsx
function createStore(reducer: any) {
    let state: any;
    let listeners: any[] = [];
    function getState() {
        return state;
    }
    function dispatch(action: any) {
        state = reducer(state, action);
        listeners.forEach(l => l());
    }
    function subscribe(listener: any) {
        listeners.push(listener);
        return () => {
            listeners = listeners.filter(item => item != listener);
            console.log(listeners);
        }
    }
    dispatch({});
    return {
        getState,
        dispatch,
        subscribe
    }
}
let store = createStore((state: any, action: any) => state);
```

#### 5.3.2 commonjsä¸­çš„  [HotModuleReplacement](https://github.com/webpack/webpack/blob/8070bcd333cd1d07ce13fe5e91530c80779d51c6/lib/hmr/HotModuleReplacement.runtime.js#L55)

```tsx
(function(modules) {
  // webpackçš„å¯åŠ¨å‡½æ•°
  //æ¨¡å—çš„ç¼“å­˜
  var installedModules = {};
  //å®šä¹‰åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨çš„requireæ–¹æ³•
  function __webpack_require__(moduleId) {
    //æ£€æŸ¥æ¨¡å—æ˜¯å¦åœ¨ç¼“å­˜ä¸­
    if (installedModules[moduleId]) {
      return installedModules[moduleId].exports;
    }
    //åˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å—å¹¶ä¸”æ”¾åˆ°æ¨¡å—çš„ç¼“å­˜ä¸­
    var module = (installedModules[moduleId] = {
      i: moduleId,
      l: false,
      exports: {}
    });

    //æ‰§è¡Œæ¨¡å—å‡½æ•°
    modules[moduleId].call(
      module.exports,
      module,
      module.exports,
      __webpack_require__
    );

    //æŠŠæ¨¡å—è®¾ç½®ä¸ºå·²ç»åŠ è½½
    module.l = true;

    //è¿”å›æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡
    return module.exports;
  }
}
```

#### 5.3.3 [jquery](https://code.jquery.com/jquery-3.4.1.js)

```tsx
if(window.jQuery!=null){
  return window.jQuery;
}else{
    //init~~~~~~~
}
```

## å…­ã€é€‚é…å™¨æ¨¡å¼

- é€‚é…å™¨æ¨¡å¼åˆç§°åŒ…è£…å™¨æ¨¡å¼,å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬åŒ–ä¸ºç”¨æˆ·éœ€è¦çš„å¦ä¸€ä¸ªæ¥å£,è§£å†³ç±»(å¯¹è±¡)ä¹‹é—´æ¥å£ä¸å…¼å®¹çš„é—®é¢˜
- æ—§çš„æ¥å£å’Œä½¿ç”¨è€…ä¸å…¼å®¹
- ä¸­é—´åŠ ä¸€ä¸ªé€‚é…å™¨è½¬æ¢æ¥å£

### 6.1 ç±»å›¾æ¼”ç¤º

![é€‚é…å™¨æ¨¡å¼](img/26.png)

### 6.2 ä»£ç æ¼”ç¤º

```tsx
class Socket {
    output() {
        return 'è¾“å‡º220V';
    }
}

abstract class Power {
    abstract charge(): string;
}
class PowerAdapter extends Power {
    constructor(public socket: Socket) {
        super();
    }
    //è½¬æ¢åçš„æ¥å£å’Œè½¬æ¢å‰ä¸ä¸€æ ·
    charge() {
        return this.socket.output() + ' ç»è¿‡è½¬æ¢ è¾“å‡º24V';
    }
}
let powerAdapter = new PowerAdapter(new Socket());
console.log(powerAdapter.charge());
```

### 6.3 åº”ç”¨åœºæ™¯

#### 6.3.1 [Axios](https://github.com/axios/axios/blob/master/lib/core/Axios.js#L6)

```tsx
//let axios = require('axios');
let url = require('url');
function axios(config: any): any {
    let adaptor = getDefaultAdapter();
    return adaptor(config);
}
axios({
    method: 'GET',
    url: 'http://localhost:8080/api/user?id=1'
}).then(function (response: any) {
    console.log(response);
}, function (error: any) {
    console.log(error);
})

function xhr(config: any) {
    return new Promise(function (resolve, reject) {
        var request = new XMLHttpRequest();
        request.open(config.method, config.url, true);
        request.onreadystatechange = function () {
            if (request.readyState == 4) {
                if (request.status == 200) {
                    resolve(request.response);
                } else {
                    reject('è¯·æ±‚å¤±è´¥');
                }
            }
        }
    })
}
function http(config: any) {
    let http = require('http');
    let urlObject = url.parse(config.url);
    return new Promise(function (resolve, reject) {
        const options = {
            hostname: urlObject.hostname,
            port: urlObject.port,
            path: urlObject.pathname,
            method: config.method
        };
        var req = http.request(options, function (res: any) {
            let chunks: any[] = [];
            res.on('data', (chunk: any) => {
                chunks.push(chunk);
            });
            res.on('end', () => {
                resolve(Buffer.concat(chunks).toString());
            });
        });
        req.on('error', (err: any) => {
            reject(err);
        });
        req.end();
    })
}
function getDefaultAdapter(): any {
    var adapter;
    if (typeof XMLHttpRequest !== 'undefined') {
        adapter = xhr;
    } else if (typeof process !== 'undefined') {
        adapter = http;
    }
    return adapter;
}
```

#### 6.3.2  promisify

```tsx
let fs = require('fs');
var Bluebird = require("bluebird");
let readFile = Bluebird.promisify(fs.readFile);

(async function () {
    let content = await readFile('./1.txt', 'utf8');
    console.log(content);
})()


function promisify(readFile: any) {
    return function (filename: any, encoding: any) {
        return new Promise(function (resolve, reject) {
            readFile(filename, encoding, function (err: any, data: any) {
                if (err)
                    reject(err);
                else
                    resolve(data);
            })
        });
    }
}
```

#### 6.3.3 [sequelize](https://github.com/demopark/sequelize-docs-Zh-CN/tree/master)

```tsx
//cnpm i sequelize sqlite3 -S
const { Sequelize, Model, DataTypes } = require('sequelize');
const sequelize = new Sequelize('sqlite::memory:');

class User extends Model { }
User.init({
    username: DataTypes.STRING
}, { sequelize, modelName: 'user' });

sequelize.sync()
    .then(() => User.create({
        username: 'zhufeng'
    }))
    .then(result => {
        console.log(result.toJSON());
    });
```

## ä¸ƒã€è£…é¥°å™¨æ¨¡å¼

- åœ¨ä¸æ”¹å˜å…¶åŸæœ‰çš„ç»“æ„å’ŒåŠŸèƒ½ä¸ºå¯¹è±¡æ·»åŠ æ–°åŠŸèƒ½çš„æ¨¡å¼å…¶å®å°±å«åšè£…é¥°å™¨æ¨¡å¼
- æœ€ç›´è§‚åœ°å°±æ˜¯æˆ‘ä»¬ä¹°æˆ¿åçš„è£…ä¿®
- è£…é¥°æ¯”ç»§æ‰¿æ›´åŠ çµæ´»,å¯ä»¥å®ç°è£…é¥°è€…å’Œè¢«è£…é¥°è€…ä¹‹é—´æ¾è€¦åˆ
- è¢«è£…é¥°è€…å¯ä»¥ä½¿ç”¨è£…é¥°è€…åŠ¨æ€åœ°å¢åŠ å’Œæ’¤é”€åŠŸèƒ½

### 7.1 ç±»å›¾æ¼”ç¤º

![](img/27.png)

### 7.2 ä»£ç æ¼”ç¤º

```tsx
abstract class Shape {
    abstract draw(): void;
}
class Circle extends Shape {
    draw() {
        console.log('ç»˜åˆ¶åœ†å½¢');
    }
}
class Rectangle extends Shape {
    draw() {
        console.log('ç»˜åˆ¶çŸ©å½¢');
    }
}

abstract class ColorfulShape extends Shape {
    public constructor(public shape: Shape) {
        super();
    }
    abstract draw(): void;
}

class RedColorfulShape extends ColorfulShape {
    draw() {
        this.shape.draw();
        console.log('æŠŠè¾¹æ¡†æ¶‚æˆçº¢è‰²');
    }
}
class GreenColorfulShape extends ColorfulShape {
    draw() {
        this.shape.draw();
        console.log('æŠŠè¾¹æ¡†æ¶‚æˆç»¿è‰²');
    }
}

let circle = new Circle();
let redColorfulShape = new RedColorfulShape(circle);
redColorfulShape.draw();

let rectangle = new Rectangle();
let greenColorfulShape = new GreenColorfulShape(rectangle);
greenColorfulShape.draw();
```

### 7.3 åº”ç”¨åœºæ™¯

#### 7.3.1 ç±»è£…é¥°å™¨

- è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ°ç±»å£°æ˜ã€æ–¹æ³•ã€å±æ€§æˆ–å‚æ•°ä¸Šï¼Œå¯ä»¥ä¿®æ”¹ç±»çš„è¡Œä¸º
- å¸¸è§çš„è£…é¥°å™¨æœ‰ç±»è£…é¥°å™¨ã€å±æ€§è£…é¥°å™¨ã€æ–¹æ³•è£…é¥°å™¨å’Œå‚æ•°è£…é¥°å™¨
- è£…é¥°å™¨çš„å†™æ³•åˆ†ä¸ºæ™®é€šè£…é¥°å™¨å’Œè£…é¥°å™¨å·¥å‚

```tsx
export { }
namespace decorator {
    interface Animal {
        swings: string;
        fly: any
    }
    function flyable(target: any) {
        console.log(target);

        target.prototype.swings = 2;
        target.prototype.fly = function () {
            console.log('I can fly');
        }
    }
    @flyable
    class Animal {
        constructor() { }
    }
    let animal: Animal = new Animal();
    console.log(animal.swings);
    animal.fly();
}
```

#### 7.3.2 å±æ€§è£…é¥°å™¨

- å±æ€§è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨
- å±æ€§åˆ†ä¸ºå®ä¾‹å±æ€§å’Œç±»å±æ€§
- æ–¹æ³•åˆ†ä¸ºå®ä¾‹æ–¹æ³•å’Œç±»æ–¹æ³•

```tsx
namespace property_namespace {
    //å®ä¾‹å±æ€§targetæ˜¯ç±»çš„åŸå‹å¯¹è±¡,keyæ˜¯å±æ€§åç§°
    function instancePropertyDecorator(target: any, key: string) {
    }
    //ç±»å±æ€§targetæ˜¯çš„æ„é€ å‡½æ•°
    function classPropertyDecorator(target: any, key: string) {
    }
    //å®ä¾‹æ–¹æ³•è£…é¥°å™¨targetæ˜¯åŸå‹å¯¹è±¡,keyæ–¹æ³•å,descriptoræ˜¯æ–¹æ³•æè¿°ç¬¦
    function instanceMethodDecorator(target: any, key: string, descriptor: PropertyDescriptor) {
    }
    //ç±»æ–¹æ³•è£…é¥°å™¨targetæ˜¯ç±»çš„æ„é€ å‡½æ•°
    function classMethodDecorator(target: any, key: string, descriptor: PropertyDescriptor) {
    }
    class Person {
        @instancePropertyDecorator
        instanceProperty: string;
        @classPropertyDecorator
        public static classProperty: string;
        @instanceMethodDecorator
        instanceMethod() {
            console.log('instanceMethod');
        }
        @classMethodDecorator
        classMethod() {
            console.log('classMethod');
        }
    }
}
```

## å…«ã€å¤–è§‚æ¨¡å¼

- å¤–è§‚æ¨¡å¼(Facade Pattern)åˆå«é—¨é¢æ¨¡å¼ï¼Œå®šä¹‰ä¸€ä¸ªå°†å­ç³»ç»Ÿçš„ä¸€ç»„æ¥å£é›†æˆåœ¨ä¸€èµ·çš„é«˜å±‚æ¥å£ï¼Œä»¥æä¾›ä¸€ä¸ªä¸€è‡´çš„å¤–è§‚
- å¤–è§‚æ¨¡å¼è®©å¤–ç•Œå‡å°‘ä¸å­ç³»ç»Ÿå†…å¤šä¸ªæ¨¡å—çš„ç›´æ¥äº¤äº’ï¼Œä»è€Œå‡å°‘è€¦åˆï¼Œè®©å¤–ç•Œå¯ä»¥æ›´è½»æ¾åœ°ä½¿ç”¨å­ç³»ç»Ÿ
- è¯¥è®¾è®¡æ¨¡å¼ç”±ä»¥ä¸‹è§’è‰²ç»„æˆ
  - é—¨é¢è§’è‰²ï¼šå¤–è§‚æ¨¡å¼çš„æ ¸å¿ƒã€‚å®ƒè¢«å®¢æˆ·è§’è‰²è°ƒç”¨,å®ƒç†Ÿæ‚‰å­ç³»ç»Ÿçš„åŠŸèƒ½ã€‚å†…éƒ¨æ ¹æ®å®¢æˆ·è§’è‰²çš„éœ€æ±‚é¢„å®šäº†å‡ ç§åŠŸèƒ½çš„ç»„åˆ
  - å­ç³»ç»Ÿè§’è‰²:å®ç°äº†å­ç³»ç»Ÿçš„åŠŸèƒ½ã€‚å®ƒå¯¹å®¢æˆ·è§’è‰²å’Œ`Facade`æ˜¯æœªçŸ¥çš„
  - å®¢æˆ·è§’è‰²:é€šè¿‡è°ƒç”¨Facedeæ¥å®Œæˆè¦å®ç°çš„åŠŸèƒ½
- é¥æ§å™¨ã€è‡ªåŠ¨é©¾é©¶æ±½è½¦ã€æˆ¿å±‹ä¸­ä»‹

### 8.1 ç±»å›¾å±•ç¤º

![](img/28.jpeg)

### 8.2 åº”ç”¨åœºæ™¯

```tsx
class Sum {
    sum(a, b) {
        return a + b;
    }
}
class Minus {
    minus(a, b) {
        return a - b;
    }
}
class Multiply {
    multiply(a, b) {
        return a * b;
    }
}
class Calculator {
    sumObj
    minusObj
    multiplyObj
    constructor() {
        this.sumObj = new Sum();
        this.minusObj = new Minus();
        this.multiplyObj = new Multiply();
    }
    sum(...args) {
        return this.sumObj.sum(...args);
    }
    minus(...args) {
        return this.minusObj.minus(...args);
    }
    multiply(...args) {
        return this.multiplyObj.multiply(...args);
    }
}
let calculator = new Calculator();
console.log(calculator.sum(1, 2));
console.log(calculator.minus(1, 2));
console.log(calculator.multiply(1, 2));
```

## ä¹ã€è¿­ä»£å™¨æ¨¡å¼

è¿­ä»£å™¨æ¨¡å¼(Iterator Pattern)ç”¨äºé¡ºåºåœ°è®¿é—®èšåˆå¯¹è±¡å†…éƒ¨çš„å…ƒç´ ï¼Œåˆæ— éœ€çŸ¥é“å¯¹è±¡å†…éƒ¨ç»“æ„ã€‚ä½¿ç”¨äº†è¿­ä»£å™¨ä¹‹åï¼Œä½¿ç”¨è€…ä¸éœ€è¦å…³å¿ƒå¯¹è±¡çš„å†…éƒ¨æ„é€ ï¼Œå°±å¯ä»¥æŒ‰åºè®¿é—®å…¶ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚

### 9.1 ç±»å›¾æ¼”ç¤º

![è¿­ä»£å™¨æ¨¡å¼](img/29.jpeg)

### 9.2 ä»£ç æ¼”ç¤º

```tsx
function createIterator(arr) {
    let index=0;
    return {
        next() {
            return index<arr.length?
                {value: arr[index++],done: false}:
                {done:true}
        }
    }
}
let it=createIterator([1,2]);
console.log(it.next());
console.log(it.next());
console.log(it.next());
```

### 9.3 åº”ç”¨åœºæ™¯

#### 9.3.1 ä½¿ç”¨forå¾ªç¯è‡ªå·±å®ç°ä¸€ä¸ªforEach

```tsx
Array.prototype.forEach = function (cb) {
  for (var i = 0; i < this.length; i++) {
      cb.call(this, this[i], i, arr);
  }
}
let arr = [1, 2, 3];
arr.forEach((item) => {
  console.log(item);
});
```

#### 9.2 yield

- yield*åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªå¯éå†çš„ç»“æ„ï¼Œå®ƒä¼šè°ƒç”¨è¯¥ç»“æ„çš„éå†å™¨æ¥å£

```tsx
let generator = function* () {
    yield 1;
    yield* [2, 3];
    yield 4;
};

var iterator = generator();

console.log(iterator.next()); // { value: 1, done: false }
console.log(iterator.next()); // { value: 2, done: false }
console.log(iterator.next()); // { value: 3, done: false }
console.log(iterator.next()); // { value: 4, done: false }
console.log(iterator.next()); // { value: undefined, done: true }
```

## åã€ä»£ç†æ¨¡å¼

- ç”±äºä¸€ä¸ªå¯¹è±¡ä¸èƒ½ç›´æ¥å¼•ç”¨å¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ä»£ç†å¯¹è±¡åœ¨è¿™ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹ä½œç”¨
- ä»£ç†æ¨¡å¼å°±æ˜¯ä¸ºç›®æ ‡å¯¹è±¡åˆ›é€ ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä»¥å®ç°å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®
- è¿™æ ·å°±å¯ä»¥åœ¨ä»£ç†å¯¹è±¡é‡Œå¢åŠ ä¸€äº›é€»è¾‘åˆ¤æ–­ã€è°ƒç”¨å‰æˆ–è°ƒç”¨åæ‰§è¡Œä¸€äº›æ“ä½œï¼Œä»è€Œå®ç°äº†æ‰©å±•ç›®æ ‡çš„åŠŸèƒ½
- ç«è½¦ç¥¨ä»£è´­ã€æˆ¿äº§ä¸­ä»‹ã€å¾‹å¸ˆã€æµ·å¤–ä»£è´­ã€æ˜æ˜Ÿç»çºªäºº

### 10.1 ç±»å›¾æ¼”ç¤º

![](img/30.png)

### 10.2 ä»£ç 

```tsx
abstract class Star {
    abstract answerPhone(): void;
}

class Angelababy extends Star {
    public available: boolean = true;
    answerPhone(): void {
        console.log('ä½ å¥½,æˆ‘æ˜¯Angelababy.');
    }
}
class AngelababyAgent extends Star {
    constructor(private angelababy: Angelababy) {
        super();
    }
    answerPhone(): void {
        console.log('ä½ å¥½,æˆ‘æ˜¯Angelababyçš„ç»çºªäºº.');
        if (this.angelababy.available) {
            this.angelababy.answerPhone();
        }
    }
}
let angelababyAgent = new AngelababyAgent(new Angelababy());
angelababyAgent.answerPhone();
```

### 10.3 åœºæ™¯

#### 10.3.1 äº‹ä»¶å§”æ‰˜ä»£ç†

- äº‹ä»¶æ•è·æŒ‡çš„æ˜¯ä»documentåˆ°è§¦å‘äº‹ä»¶çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œå³è‡ªä¸Šè€Œä¸‹çš„å»è§¦å‘äº‹ä»¶
- äº‹ä»¶å†’æ³¡æ˜¯è‡ªä¸‹è€Œä¸Šçš„å»è§¦å‘äº‹ä»¶
- ç»‘å®šäº‹ä»¶æ–¹æ³•addEventListençš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå°±æ˜¯æ§åˆ¶äº‹ä»¶è§¦å‘é¡ºåºæ˜¯å¦ä¸ºäº‹ä»¶æ•è·ã€‚trueä¸ºäº‹ä»¶æ•è·ï¼›falseä¸ºäº‹ä»¶å†’æ³¡,é»˜è®¤false

![](img/31.jpg)

#### 10.3.2 å›¾ç‰‡é¢„åŠ è½½

```js
// app.js
let express=require('express');
let path=require('path')
let app=express();
app.get('/images/loading.gif',function (req,res) {
    res.sendFile(path.join(__dirname,req.path));
});
app.get('/images/:name',function (req,res) {
    setTimeout(() => {
        res.sendFile(path.join(__dirname,req.path));
    }, 2000);
});
app.get('/',function (req,res) {
    res.sendFile(path.resolve('index.html'));
});
app.listen(8080);
```

```html
// index.html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .bg-container {
            width: 600px;
            height: 400px;
            margin: 100px auto;
        }

        .bg-container #bg-image {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="background">
        <button data-src="/images/bg1.jpg">èƒŒæ™¯1</button>
        <button data-src="/images/bg2.jpg">èƒŒæ™¯2</button>
    </div>
    <div class="bg-container">
        <img id="bg-image" src="/images/bg1.jpg" />
    </div>
    <script>
        let container = document.querySelector('#background');

        class BackgroundImage {
            constructor() {
                this.bgImage = document.querySelector('#bg-image');
            }
            setSrc(src) {
                this.bgImage.src = src;
            }
        }
        class LoadingBackgroundImage { 
             static LOADING_URL= `/images/loading.gif`;
            constructor() {
                this.backgroundImage = new BackgroundImage();
            }
            setSrc(src) {
                this.backgroundImage.setSrc(LoadingBackgroundImage.LOADING_URL);
                let img = new Image();
                img.onload = () => {
                    this.backgroundImage.setSrc(src);
                }
                img.src = src;
            }
        }
        let loadingBackgroundImage = new LoadingBackgroundImage();
        container.addEventListener('click', function (event) {
            let src = event.target.dataset.src;
            loadingBackgroundImage.setSrc(src + '?ts=' + Date.now());
        });
    </script>
</body>

</html>
```

#### 10.3.3 é˜²æŠ–ã€èŠ‚æµä»£ç†

ç•¥~ï¼

#### 10.3.4 è·¨åŸŸä»£ç†

#### 10.3.5 Proxy

## åä¸€ã€è§‚å¯Ÿè€…æ¨¡å¼

 è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆæœ‰æ—¶åˆè¢«ç§°ä¸ºæ¨¡å‹ï¼ˆModelï¼‰-è§†å›¾ï¼ˆViewï¼‰æ¨¡å¼ã€æº-æ”¶å¬è€…(Listener)æ¨¡å¼æˆ–ä»å±è€…æ¨¡å¼ï¼‰æ˜¯[è½¯ä»¶è®¾è®¡æ¨¡å¼](https://baike.baidu.com/item/è½¯ä»¶è®¾è®¡æ¨¡å¼/2117635)çš„ä¸€ç§ã€‚åœ¨æ­¤ç§æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªç›®æ ‡ç‰©ä»¶ç®¡ç†æ‰€æœ‰ç›¸ä¾äºå®ƒçš„è§‚å¯Ÿè€…ç‰©ä»¶ï¼Œå¹¶ä¸”åœ¨å®ƒæœ¬èº«çš„çŠ¶æ€æ”¹å˜æ—¶ä¸»åŠ¨å‘å‡ºé€šçŸ¥ã€‚è¿™é€šå¸¸é€è¿‡å‘¼å«å„è§‚å¯Ÿè€…æ‰€æä¾›çš„æ–¹æ³•æ¥å®ç°ã€‚æ­¤ç§æ¨¡å¼é€šå¸¸è¢«ç”¨æ¥å®ç°äº‹ä»¶å¤„ç†ç³»ç»Ÿã€‚
è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªç›®æ ‡å¯¹è±¡ï¼Œå½“è¿™ä¸ªç›®æ ‡å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°

### 11.1 ç±»å›¾æ¼”ç¤º

- ä¸»é¢˜å¯¹è±¡(Subject) è¯¥è§’è‰²åˆç§°ä¸ºè¢«è§‚å¯Ÿè€…,å¯ä»¥å¢åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…å¯¹è±¡,å®ƒå°†æœ‰å…³çŠ¶æ€å­˜å…¥å…·ä½“è§‚å¯Ÿè€…å¯¹è±¡ï¼Œåœ¨å…·ä½“ä¸»é¢˜çš„å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶ï¼Œç»™æ‰€æœ‰ç™»è®°è¿‡(å…³è”äº†è§‚å¯Ÿå…³ç³»)çš„è§‚å¯Ÿè€…å‘å‡ºé€šçŸ¥
- è§‚å¯Ÿè€…(Observer)è§’è‰²ï¼šå®šä¹‰ä¸€ä¸ªæ¥æ”¶é€šçŸ¥çš„æ¥å£(update),åœ¨å¾—åˆ°ä¸»é¢˜çš„é€šçŸ¥æ—¶æ›´æ–°è‡ªå·±

![è§‚å¯Ÿè€…æ¨¡å¼](img/32.png)

### 11.2 ä»£ç æ¼”ç¤º

```tsx
abstract class Student {
    constructor(public teacher: Teacher) { }
    public abstract update();
}
class Xueba extends Student {
    public update() {
        console.log(this.teacher.getState() + ',å­¦éœ¸æŠ¬å¤´ä¸¾æ‰‹');
    }
}
class Xuezha extends Student {
    public update() {
        console.log(this.teacher.getState() + ',å­¦æ¸£ä½å¤´ç¥ˆç¥·');
    }
}

class Teacher {
    private students: Student[] = new Array<Student>();
    public state: string = 'è€å¸ˆè®²è¯¾'
    getState() {
        return this.state;
    }
    public askQuestion() {
        this.state = 'è€å¸ˆæé—®';
        this.notifyAllStudents();
    }
    attach(student: Student) {
        this.students.push(student);
    }
    notifyAllStudents() {
        this.students.forEach(student => student.update());
    }
}
let teacher = new Teacher();
teacher.attach(new Xueba(teacher));
teacher.attach(new Xueza(teacher));
teacher.askQuestion();
```

### 11.3 åº”ç”¨åœºæ™¯

#### 11.3.1 åŸç”ŸDOMäº‹ä»¶ä»£ç†

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>è§‚å¯Ÿè€…æ¨¡å¼</title>
</head>

<body>
    <button id="btn">click</button>
    <script>
        let btn = document.getElementById('btn');
        const handler1 = () => { console.log(1); }
        const handler2 = () => { console.log(2); }
        const handler3 = () => { console.log(3); }
        btn.addEventListener('click', handler1);
        btn.addEventListener('click',handler2);
        btn.addEventListener('click', handler3);
    </script>
</body>

</html>
```

#### 11.3.2 EventEmitter

ç•¥~ï¼

#### 11.3.3 ç”Ÿå‘½å‘¨æœŸå‡½æ•°

![](img/33.jpg)

![](img/34.jpg)

#### 11.3.4 eventBus

- å¦‚æœä½ è§‰å¾—ä½¿ç”¨`$on`ã€`$emit`ä¸æ–¹ä¾¿,è€Œä½ åˆä¸æ„¿æ„å¼•å…¥`vuex`,å¯ä»¥ä½¿ç”¨`EventBus`
- åœ¨è¦ç›¸äº’é€šä¿¡çš„å…„å¼Ÿç»„ä»¶ä¹‹ä¸­ï¼Œéƒ½å¼•å…¥ä¸€ä¸ªæ–°çš„vueå®ä¾‹ï¼Œç„¶åé€šè¿‡åˆ†åˆ«è°ƒç”¨è¿™ä¸ªå®ä¾‹çš„äº‹ä»¶è§¦å‘å’Œç›‘å¬æ¥å®ç°é€šä¿¡å’Œå‚æ•°ä¼ é€’

#### 11.3.5 vueå“åº”å¼

åœ¨ Vue ä¸­ï¼Œæ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½æœ‰ç›¸åº”çš„ `watcher` å®ä¾‹å¯¹è±¡ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠå±æ€§è®°å½•ä¸ºä¾èµ–ï¼Œä¹‹åå½“ä¾èµ–é¡¹çš„ `setter` è¢«è°ƒç”¨æ—¶ï¼Œä¼šé€šçŸ¥ `watcher` é‡æ–°è®¡ç®—ï¼Œä»è€Œè‡´ä½¿å®ƒå…³è”çš„ç»„ä»¶å¾—ä»¥æ›´æ–°

### 11.3 å‘å¸ƒè®¢é˜…æ¨¡å¼

é¦–å…ˆï¼Œå‘å¸ƒè®¢é˜…æ¨¡å¼ä¹Ÿæ˜¯éš¶å±äºè§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ç§ï¼Œå…¶ç‰¹ç‚¹å¦‚ä¸‹â†“â†“â†“

- è®¢é˜…è€…æŠŠè‡ªå·±æƒ³è®¢é˜…çš„äº‹ä»¶æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒ
- å½“è¯¥äº‹ä»¶è§¦å‘æ—¶å€™ï¼Œå‘å¸ƒè€…å‘å¸ƒè¯¥äº‹ä»¶åˆ°è°ƒåº¦ä¸­å¿ƒ,ç”±è°ƒåº¦ä¸­å¿ƒç»Ÿä¸€è°ƒåº¦è®¢é˜…è€…æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒçš„å¤„ç†ä»£ç ã€‚
- è™½ç„¶ä¸¤ç§æ¨¡å¼éƒ½å­˜åœ¨è®¢é˜…è€…å’Œå‘å¸ƒè€…ï¼ˆè§‚å¯Ÿè€…å¯è®¤ä¸ºæ˜¯è®¢é˜…è€…ã€è¢«è§‚å¯Ÿè€…å¯è®¤ä¸ºæ˜¯å‘å¸ƒè€…ï¼‰
- ä½†æ˜¯è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ç”±è¢«è§‚å¯Ÿè€…è°ƒåº¦çš„ï¼Œè€Œå‘å¸ƒ/è®¢é˜…æ¨¡å¼æ˜¯ç»Ÿä¸€ç”±è°ƒåº¦ä¸­å¿ƒè°ƒçš„
- æ‰€ä»¥è§‚å¯Ÿè€…æ¨¡å¼çš„è®¢é˜…è€…ä¸å‘å¸ƒè€…ä¹‹é—´æ˜¯å­˜åœ¨ä¾èµ–çš„ï¼Œè€Œå‘å¸ƒ/è®¢é˜…æ¨¡å¼åˆ™ä¸ä¼šã€‚

ä»£ç ç¤ºä¾‹â†“

```js
class Agency {
    _topics = {}
    subscribe(topic, listener) {
        let listeners = this._topics[topic];
        if (listeners) {
            listeners.push(listener);
        } else {
            this._topics[topic] = [listener];
        }
    }
    publish(topic, ...args) {
        let listeners = this._topics[topic] || [];
        listeners.forEach(listener => listener(...args));
    }
}
class Landlord {
    constructor(public agent: Agency) { }
    lend(topic, area, money) {
        this.agent.publish(topic, area, money);
    }
}

class Tenant {
    constructor(public agent: Agency, public name: string) { }
    order(topic) {
        this.agent.subscribe(topic, (area, money) => {
            console.log(this.name, `${area}å¹³ç±³, ${money}å…ƒ`);
        });
    }
}
let agent = new Agency();
let rich = new Tenant(agent, 'å¤§æ¬¾');
let poor = new Tenant(agent, 'åŒ—æ¼‚');
let landlord = new Landlord(agent);
rich.order('è±ªå®…');
poor.order('å•é—´');
landlord.lend('è±ªå®…', 10000, 1000000);
landlord.lend('å•é—´', 10, 1000);
```

